---
layout: post
title: Step by Step Guide line of Web Performance Testing using Visual Studio Ultimate 2013
date: 2014-07-06 07:47
author: techforumugm
comments: true
categories: [Performance Tuning]
---
<a href="https://www.blogger.com/" style="clear:left;float:left;margin-bottom:1em;margin-right:1em;"></a><a href="https://www.blogger.com/" style="clear:left;float:left;margin-bottom:1em;margin-right:1em;"></a><a href="https://www.blogger.com/" style="clear:left;float:left;margin-bottom:1em;margin-right:1em;"></a><a href="https://www.blogger.com/" style="clear:left;float:left;margin-bottom:1em;margin-right:1em;"></a><a href="https://www.blogger.com/" style="margin-left:1em;margin-right:1em;"></a><br /><div class="separator" style="clear:both;text-align:center;"><a href="https://www.blogger.com/" style="margin-left:1em;margin-right:1em;"></a><br /></div><h2>Introduction</h2>Performance testing determine how a application act under a specific workload .To measure, validate or verify responsiveness and stability of the application and resource usage for smooth operation.<br /><h2>Background</h2>Performance testing is used to uncover performance problems that can result from lack of server-side resources, inappropriate network bandwidth, inadequate data- base capabilities, faulty or weak operating system capabilities, poorly designed Application functionality, and other hardware or software issues that can lead to degraded client-server performance.<br /><h2>Why is Performance Testing required ?</h2><ul><li>Eliminate system failure and user <span lang="EN">dissatisfaction</span>.</li><li>Eliminate system deployment delay due to performance issues.</li><li>Eliminate system rework due to performance issues.</li><li>Eliminate additional and unnecessary hardware acquisition costs.</li><li>Eliminate maintenance costs due to performance problems in production.</li><li>Eliminate additional operational overhead for handling system.</li></ul><div><h2>Performance Testing Cover</h2></div><div>The number of simultaneous users grows, transactions increases, or the amount of data increases,<br />performance testing will help answer the following questions:<br /><ul><li>Response time degrade to a point where it is noticeable and unacceptable?</li><li>At what point does performance become unacceptable?</li><li>What system components are responsible for performance degradation?</li><li>What is the average response time for users under a variety of loading conditions?</li><li>Does performance degradation have an impact on system security?</li><li>Is Apps reliability or accuracy affected as the load on the system grows?</li><li>What happens when loads that are greater than maximum server capacity are applied?</li></ul><h2>What are the testing mechanism to avoid the situation ?</h2><ol><li>Load testing is conducted to understand the behavior of the system under a specific expected load ,concurrent user ,no of transaction within a specific time and data volume.This test will give out the response times of  a transactions and then it can point towards bottleneck of application software.</li><li>Stress Testing is normally used to understand the upper limits or breaking point of capacity of the application.</li><li>Spike testing is done to observe the behavior of the system by suddenly increasing number of concurrent user and transaction . The goal is to determine whether the system will fail, or it will be able to handle dramatic changes in load.</li></ol></div><h1><strong>W</strong>alk through</h1>We will walk through to conduct performance and load testing to know the application <span lang="EN">behavior </span>at diffier situation .Our goal is to predicate and find out the bottle neck status whenever number of concurrent user,data base size ,number of transaction become high and low band width status.<br /><ol><li>Web Performance Tests</li><li>Load Testing</li></ol><h1><strong>Testing Environment </strong></h1><br /><ol><li>Visual Studio 2013 Ultimate installation .</li><li>SQL Server 2012 or higher</li></ol>Load test result are kept in a database named LoadTest2010 .Now you need to configure that using <strong>Mange Test Controllers</strong> from <strong>Load Test</strong> menu. Note that the selected <strong>Controller</strong> is set to <strong></strong>. Select the <strong>ellipses</strong> button to setup the connection string to the load test results store.<br />                                         <img /><br />In the <strong>Connection Properties</strong> window use a Server Name of <strong>PCSW</strong>, use <strong>Windows Authentication</strong>, and use the default database name. Once you have the database connection properties in place, select the <strong>OK</strong> button to save.Select the <strong>Close</strong> button to exit out of the Manage Test Controller window.<br /><h2>Start the Journey</h2>Open Project :<br /><ol><li>Open Visual Studio , go to  <strong>File &gt;</strong> <strong>New &gt; Project</strong></li><li>From the <strong>New Project</strong> window, Go to Test &gt; select the <strong>Web Performance and Load Test Project</strong> template and finally select the <strong>OK</strong> button.</li><li>The new web and load test project has created .</li></ol><br />                                        <img /><br />                                                                        Figure :New load test project<br />Specifying Test Settings :<br /><span class="st">When you add a Web Performance and <em><strong>Load test</strong></em> project to a solution, a default <em><strong>Local</strong></em>.<em><strong>testsettings</strong></em> file is created automatically. You will found it i</span>n solution explorear , file name "Local.testsettings". It is added automatically to the solution under the <span class="label">Solution Items</span> folder. This runs your tests locally without diagnostic data adapters selected. You can add or edit a .testsettings file to specify diagnostic data adapters and test controllers.<br />You need to customize the <strong><em>Local</em></strong>.<em><strong>testsettings file</strong></em> according to your testing /deployment environment .To do that you need to Click on the file <strong><em>Local</em></strong>.<em><strong>testsettings.</strong></em>You will found the below dialog box :<br />                                              <img /><br />                                                                            Figure : Test Setting dialog box<br /><em><strong><span class="label">General</span></strong></em><br /><em><strong><span class="label">Roles</span></strong></em><br />          Here you can select the option where test to run on your local machine or to run remotely.<br /><ul><li><span class="label">Local execution</span> is the default. It means that the tests and the application run on your Visual Studio machine, or on the build server after you have checked in the code.</li><li><span class="label">Local execution with remote collection</span> is a typical configuration for testing a web app or client-server system. The test code runs on the local machine, but you can also collect test data from the components of the application that are installed on other machines.</li><li><span class="label">Remote execution</span> is used where you do not want to run any part of your application locally. This is a typical configuration where the application requires particular platforms, such as a specific web browser or database. You can collect test data and configure the test environment on each machine.</li></ul><strong><span class="label">Data and Diagnostics</span></strong><br />You need to select <span class="parameter">diagnostic data adapters</span> according to your testing requirement.Say if you want to change the Network configuration / communication way (i.e. modem ,LAN etc) then select Network Emulation check Enable and press on Configuration button you will get several option select any one of them.If listed item is not match then you have to create new network profile. You will get all network profile on following folder :                                                                                             C:\Program Files (x86)\Microsoft Visual Studio 12.0\Common7\IDE\Templates\LoadTest\Networks<br /><br />                                                 <img /><br />                                                            Figure :Configure data Diagnostic adapter.<br /><strong>Diagnostic data adapter List:</strong><br /><em><span class="label">ASP.NET Client Proxy for IntelliTrace and Test Impact:</span> </em><br />This proxy allows you to collect information about the http calls from a client to a Web server for the IntelliTrace and Test Impact diagnostic data adapters.<br /><em><span class="label">IntelliTrace</span> <span class="label">:</span> </em><br />You can configure the diagnostic data adapter for <span class="parameter">IntelliTrace</span> to collect specific diagnostic trace information to help isolate bugs that are difficult to reproduce. This adapter creates an IntelliTrace file that has an extension of .iTrace that contains this information. When a test fails, you can create a bug. The IntelliTrace file that is saved with the test results is automatically linked to this bug. The data that is collected in the IntelliTrace file increases debugging productivity by reducing the time that is required to reproduce and diagnose an error in the code. From this IntelliTrace file the local session can be simulated on another computer, this reduces the possibility of a bug being non-reproducible.<br /><em><span class="label">ASP.NET profiler</span> <span class="label">:</span></em><br />You can create a test setting that includes ASP.NET profiling, which collects performance data on ASP.NET Web applications.This diagnostic data adapter is for use only with load tests that use websites that require Visual Studio Ultimate.<br /><em><span class="label">Code coverage (Visual Studio 2010)</span> <span class="label">:</span> </em><br />You can create a test setting that includes code coverage information that is used to investigate how much of your code is covered by tests.This diagnostic data adapter is only applicable to Visual Studio test settings. It is not used for test settings in Microsoft Test Manager.This is for compatibility with Visual Studio 2010 only.<br /><em><span class="label">Event log</span> <span class="label">:</span> </em><br />You can configure a test setting to include event log collecting, which will be included in the test results.<br /><em><span class="label">Network emulation</span> <span class="label">:</span> </em><br />You can specify that you want to place an artificial network load on your test using a test setting. Network emulation affects the communication to and from the machine by emulating a particular network connection speed, such as dial-up.This diagnostic data adapter is only applicable to Visual Studio test settings. It is not used for test settings in Microsoft Test Manager.Network emulation cannot be used to increase the network connection speed.<br /><em><span class="label">System information</span> <span class="label">:</span></em><br />A test setting can be set up to include the system information about the machine that the test is run on. The system information is specified in the test results by using a test setting.<br /><em><span class="label">Test impact</span> <span class="label">:</span> </em><br />You can collect information about which methods of your applications code were used when a test case was running. This information can be used together with changes to the application code made by developers to determine which tests were impacted by those development changes.<br /><em><span class="label">Video Recorder</span> <span class="label">:</span></em><br />You can create a video recording of your desktop session when you run an automated test. This video recording can be useful to view the user actions for a coded UI test. The video recording can help other team members isolate application issues that are difficult to reproduce.<br /><br /><strong><span class="label">Deployment</span></strong><br /><ol><li>To create a separate directory for deployment every time that you run your tests, select <span class="label">Enable deployment</span>.If you select to do this, you can continue to build your application when you run your tests.To add a file to the directory you are using to run your tests that you need for the tests, choose <span class="label">Add file</span> and then select the file that you want to add.</li><li>To add a directory to the directory you are using to run your tests that you need for the tests, choose <span class="label">Add directory</span> and then select the directory that you want to add.</li></ol><strong><span class="label">Setup and Cleanup Scripts</span></strong><br /><ol><li>To run scripts before and after your tests, choose the <span class="label">Setup and Cleanup Scripts</span> page in the <span class="label">Test Settings</span> dialog box.</li><li>Type the location of the script file in <span class="label">Setup script</span> or choose the ellipsis (<span class="label">…</span>) to locate the setup script.</li><li>Type the location of the script file in <span class="label">Cleanup script</span> or choose the ellipsis (<span class="label">…</span>) to locate the cleanup script.</li></ol><strong><span class="label">Hosts</span></strong><br /><ol><li>To run your tests using a different host, choose the <span class="label">Hosts</span> page in the <span class="label">Test Settings</span> dialog box.</li><li>To run your unit tests in the same process as an ASP.NET site, select <span class="label">ASP.NET</span> in <span class="label">Host type</span>.</li><li>Use the Run test in 32-bit or 64-bit process to select if you want your test to run as 32-bit or 64-bit processes.<br />For maximum flexibility, you should compile your test projects with the <span class="label">Any CPU</span> configuration. Then you can run on both 32- and 64-bit agents. There is no advantage to compiling test projects with the <span class="label">64-bit</span> configuration.</li></ol><strong><span class="label">Test Timeouts</span></strong><br /><ol><li>To limit the period of time for each test run and individual tests, choose the <span class="label">Test Timeouts.</span> page in the <span class="label">Test Settings</span> dialog box.</li><li>To abort a test run when a time limit is exceeded, select <span class="label">Abort a test run if the total time exceeds</span> and then type a value for this limit.</li><li>To fail an individual test if a time limit is exceeded, select <span class="label">Mark an individual test as failed if its execution time exceeds</span>, and type a value for this limit.</li></ol><strong><span class="label">Unit Test</span></strong><br /> If you have to specify assembly locations that your unit tests need to load, choose <span class="label">Unit Test</span>.<br /><ol><li>For <span class="label">Root folder for the assemblies to be loaded</span>, choose <span class="label">Browse</span> to locate the folder and populate the text box.<br />The root folder that is specified can contain environment variables and represents the directory that will be used as the ApplicationBase of the AppDomain that the tests are run in. All the assemblies in this directory will be loadable by your unit tests. In a production environment, a good practice is to set this to the directory where your code under test assemblies are installed. In a development environment, a good practice is to set this to the directory where your code under test assemblies are built to. This ensures that any references that you have to the product binaries can be loaded and resolved during the discovery and execution of the tests without the need to copy the product binaries around with the tests.<br />If no value is set here, the ApplicationBase of the AppDomain that the tests are run in is set to the directory that contains the tests.</li><li>Select or clear the check box for <span class="label">Use the Load Context for assemblies in the test directory</span>.<br />By default, most assemblies are loaded into the correct "Load Context." Usually, you should leave <span class="label">Use the Load Context for assemblies in the test directory </span>selected. However, there are some conditions when you might want to turn this off:<br />If there are a large number of assemblies in your test directory, and you have specified a location under <span class="label">Root folder for the assemblies to be loaded</span>, and your tests are not dependent on being loaded in the Load Context, you could see a performance increase if you do not use the Load Context to load these test assemblies.<br />If your tests depend on being loaded in a context other than the Load Context (not typical).<br />Under <span class="label">Folders to use when the tests are run</span>, choose <span class="label">Add folder</span>.</li><li>The <span class="label">Browse For Folder</span> dialog box is displayed.</li><li>Locate the folder to use and choose <span class="label">OK</span>.<br />The <span class="label">Folders to use when the tests are run</span> setting is the setting that you will probably use the most frequently. You can specify multiple paths to folders that assemblies should be resolved from during discovery and execution of the tests. Each of the paths that are specified in this section can contain environment variables. Together with each of the paths that are specified here, there are two options that are associated with it:<br /><span class="label">First option</span>   Select the <span class="label">Use Load Context</span> check box to specify that the directory should use the load context when resolving assemblies from the directory (if the load context is not required for the tests to run correctly you might see a performance improvement by clearing this check box).<br /><span class="label">Second option</span>   Select the <span class="label">Include sub-folders</span> check box to specify using any sub-folder to include when resolving assemblies from the directory.</li><li>Under <span class="label">Additional folders to use when discovering tests</span>, choose <span class="label">Add Folder</span>.<br />The <span class="label">Browse For Folder</span> dialog box is displayed.</li><li>Locate the folder to use and choose <span class="label">OK</span>.</li></ol><strong><span class="label">Web Test</span></strong><br /><ol><li>Select either <span class="label">Fixed run count</span>, or <span class="label">One run per data source row</span>.</li><li>Use the <span class="label">Browser type</span> drop-down list to select the Web browser to use with your Web performance test. For example, <span class="label">Internet Explorer 10.0</span>.</li><li> Select Simulate think times to enable simulated human pausing.</li><li>Select <span class="label">Use request URL’s directory as the default path for cookies</span>.</li></ol>Through the above steps we've completed the testing profile as we need to execute our test senario.You can also open the <strong><em>Local</em></strong>.<em><strong>testsettings. </strong></em>Right click on <strong><em>Local</em></strong>.<em><strong>testsettings </strong></em>file and press open with :<br />                                     <img /><br />                                         Figure : <strong><em>Local</em></strong>.<em><strong>testsettings file </strong></em><br />After that following dialog box will appear, you can open the file any of the following way :<br />                                    <img /><br /><div class="separator" style="clear:both;text-align:center;"> </div>
